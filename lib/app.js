'use strict';var hatOrCat=function(){'use strict';function a(N){return function(P){return N[4<P%100&&20>P%100?2:d[5>P%10?P%10:5]]}}var b=30,c='assets/imgs/hats-cats/',d=[2,0,1,1,1,2],f=function(O,P){return P?document.querySelectorAll(O):document.querySelector(O)},g=function(O){O.classList.toggle('is-hidden')},h=0,k=f('.js-score-value'),l=f('.js-score-block'),m=f('.js-answer-result'),n=f('.js-total-pics'),o=f('.js-next'),p=f('.js-pic'),r=null,s=null,t=-1,u=[],v={},w='\u043E\u0442\u043B\u0438\u0447\u0438\u043B',x=window.location.search,y=f('.js-invite-friends','all'),z=f('.js-answer','all'),A=function(){h=0,t=-1,n.innerText=b;k.innerHTML=h,u=B([{src:'1a.jpg',fullImg:'1b.jpg',value:'cat'},{src:'2a.jpg',fullImg:'2b.jpg',value:'hat'},{src:'3a.jpg',fullImg:'3b.jpg',value:'cat'},{src:'4a.jpg',fullImg:'4b.jpg',value:'cat'},{src:'5a.jpg',fullImg:'5b.jpg',value:'cat'},{src:'6a.jpg',fullImg:'6b.jpg',value:'hat'},{src:'7a.jpg',fullImg:'7b.jpg',value:'hat'},{src:'8a.jpg',fullImg:'8b.jpg',value:'hat'},{src:'9a.jpg',fullImg:'9b.jpg',value:'hat'},{src:'10a.jpg',fullImg:'10b.jpg',value:'hat'},{src:'11a.jpg',fullImg:'11b.jpg',value:'hat'},{src:'12a.jpg',fullImg:'12b.jpg',value:'cat'},{src:'13a.jpg',fullImg:'13b.jpg',value:'hat'},{src:'14a.jpg',fullImg:'14b.jpg',value:'hat'},{src:'15a.jpg',fullImg:'15b.jpg',value:'hat'},{src:'16a.jpg',fullImg:'16b.jpg',value:'hat'},{src:'17a.jpg',fullImg:'17b.jpg',value:'hat'},{src:'18a.jpg',fullImg:'18b.jpg',value:'hat'},{src:'19a.jpg',fullImg:'19b.jpg',value:'hat'},{src:'20a.jpg',fullImg:'20b.jpg',value:'hat'},{src:'21a.jpg',fullImg:'21b.jpg',value:'hat'},{src:'22a.jpg',fullImg:'22b.jpg',value:'cat'},{src:'23a.jpg',fullImg:'23b.jpg',value:'cat'},{src:'24a.jpg',fullImg:'24b.jpg',value:'cat'},{src:'25a.jpg',fullImg:'25b.jpg',value:'cat'},{src:'26a.jpg',fullImg:'26b.jpg',value:'cat'},{src:'27a.jpg',fullImg:'27b.jpg',value:'cat'},{src:'28a.jpg',fullImg:'28b.jpg',value:'cat'},{src:'29a.jpg',fullImg:'29b.jpg',value:'cat'},{src:'30a.jpg',fullImg:'30b.jpg',value:'cat'},{src:'31a.jpg',fullImg:'31b.jpg',value:'cat'},{src:'32a.jpg',fullImg:'32b.jpg',value:'cat'},{src:'33a.jpg',fullImg:'33b.jpg',value:'cat'},{src:'34a.jpg',fullImg:'34b.jpg',value:'cat'},{src:'35a.jpg',fullImg:'35b.jpg',value:'cat'},{src:'36a.jpg',fullImg:'36b.jpg',value:'cat'},{src:'37a.jpg',fullImg:'37b.jpg',value:'cat'},{src:'38a.jpg',fullImg:'38b.jpg',value:'cat'},{src:'39a.jpg',fullImg:'39b.jpg',value:'cat'},{src:'40a.jpg',fullImg:'40b.jpg',value:'cat'},{src:'41a.jpg',fullImg:'41b.jpg',value:'cat'},{src:'42a.jpg',fullImg:'42b.jpg',value:'cat'},{src:'43a.jpg',fullImg:'43b.jpg',value:'hat'},{src:'44a.jpg',fullImg:'44b.jpg',value:'hat'},{src:'45a.jpg',fullImg:'45b.jpg',value:'hat'},{src:'46a.jpg',fullImg:'46b.jpg',value:'cat'},{src:'47a.jpg',fullImg:'47b.jpg',value:'cat'},{src:'48a.jpg',fullImg:'48b.jpg',value:'cat'},{src:'49a.jpg',fullImg:'49b.jpg',value:'cat'},{src:'50a.jpg',fullImg:'50b.jpg',value:'cat'}]).slice(0,b),C()},B=function(O){for(var P=O.length-1;0<P;P-=1){var Q=Math.floor(Math.random()*(P+1)),R=O[P];O[P]=O[Q],O[Q]=R}return O},C=function(){var O=new Image,P=new Image;O.src=c+u[t+1].src,P.src=c+u[t+1].fullImg};A();var D=function(){return(clearTimeout(r),t+=1,k.innerHTML=h=t,o.classList.add('is-hidden'),l.classList.remove('is-hidden'),m.classList.remove('answered'),m.querySelector('.success').classList.add('is-hidden'),m.querySelector('.failure').classList.add('is-hidden'),t===u.length)?void E():void(t+1<u.length&&C(),p.style.backgroundImage='url('+c+u[t].src+')')},E=function(){clearTimeout(s),F('final-stage'),f('.logo').classList.remove('small'),f('.js-final-score-value').innerHTML=h;var P=function(Q){var R=[],S=Q.split('&');return S.forEach(function(T){var U=T.split('=');R[U[0]]=U[1]}),R}(x);console.info('urlParams',P),h<=Math.floor(0.3*u.length)?f('.js-final-3').classList.remove('is-hidden'):h<=Math.floor(0.9*u.length)?f('.js-final-2').classList.remove('is-hidden'):f('.js-final-1').classList.remove('is-hidden')},F=function(O){for(var R,P=[].slice.apply(f('.stage','all')),Q=0;Q<P.length;Q+=1)R=P[Q].classList,R.contains(O)?R.add('is-active'):R.remove('is-active')},G=function(){m.classList.contains('answered')||(m.classList.add('answered'),p.style.backgroundImage='url('+c+u[t].fullImg+')',u[t].value===this.value.toLowerCase()?(m.querySelector('.success').classList.remove('is-hidden'),g(l),g(o),r=setTimeout(D,2e3)):(m.querySelector('.failure').classList.remove('is-hidden'),s=setTimeout(E,2e3)))},H=function(){F('game-stage'),f('.js-final-1').classList.add('is-hidden'),f('.js-final-2').classList.add('is-hidden'),f('.js-final-3').classList.add('is-hidden'),f('.logo').classList.add('small'),D()},J=function(){VK.callMethod('showInviteBox')};VK.api('users.get',{fields:'sex'},function(N){v=N.response[0],1==v.sex&&(w='\u043E\u0442\u043B\u0438\u0447\u0438\u043B\u0430')});f('.js-start').addEventListener('click',H),f('.js-restart').addEventListener('click',function(){A(),H()}),f('.js-share-result').addEventListener('click',function(){VK.api('wall.post',{message:'\u042F '+w+' '+h+' '+a(['\u043A\u043E\u0442\u0430','\u043A\u043E\u0442\u043E\u0432','\u043A\u043E\u0442\u043E\u0432'])([h])+' \u043E\u0442 \u0448\u0430\u043F\u043A\u0438 \u0432 \u0438\u0433\u0440\u0435 \u0428\u0430\u043F\u043A\u0430 \u0438\u043B\u0438 \u041A\u043E\u0442! vk.com/app3732547',attachment:'photo-139010877_456239018'})}),f('.js-next').addEventListener('click',D);for(var L=0;L<y.length;L++)y[L].addEventListener('click',J);for(var M=0;M<y.length;M++)z[M].addEventListener('click',G)}();
